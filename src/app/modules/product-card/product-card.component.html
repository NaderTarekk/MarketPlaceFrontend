<!-- product-card.component.html -->

<div class="group relative bg-white rounded-2xl shadow-sm border border-gray-100 
            hover:shadow-xl hover:-translate-y-2 transition-all duration-300 
            overflow-hidden flex flex-col">

    <!-- Discount Badge -->
    <span class="absolute top-3 left-3 z-10 
               bg-red-500 text-white text-xs font-bold 
               px-2.5 py-1 rounded-full shadow-sm">
        -{{ product.discount }}%
    </span>

    <!-- Wishlist Button -->
    <button (click)="onWishlist()" aria-label="Add to Wishlist"
        [class]="'absolute top-3 right-3 z-10 w-8 h-8 flex items-center justify-center rounded-full shadow-sm border transition-all duration-300 cursor-pointer ' +
             (product.isWishlisted
               ? 'bg-red-50 border-red-200 text-red-500 scale-110'
               : 'bg-white border-gray-200 text-gray-400 opacity-0 group-hover:opacity-100 hover:text-red-500 hover:border-red-200 hover:bg-red-50')">
        <svg viewBox="0 0 24 24" width="16" height="16" [attr.fill]="product.isWishlisted ? 'currentColor' : 'none'"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path
                d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
            </path>
        </svg>
    </button>

    <!-- Product Image -->
    <div class="relative w-full bg-gray-50 flex items-center justify-center overflow-hidden" style="height: 200px;">
        <img [src]="product.image" [alt]="product.name" class="max-w-[80%] max-h-[80%] object-contain 
             group-hover:scale-110 transition-transform duration-500 ease-out rounded-2xl" />
        <div class="absolute bottom-0 left-0 right-0 h-10 
                bg-gradient-to-t from-white to-transparent pointer-events-none"></div>
    </div>

    <!-- Product Info -->
    <div class="flex flex-col flex-1 gap-2 p-4">

        <!-- Name & Brand -->
        <div>
            <h3 class="text-sm font-semibold text-gray-800 truncate leading-snug">
                {{ i18n.t(product.nameKey) }}
            </h3>
            <p class="text-xs text-gray-400 mt-0.5 font-medium tracking-wide uppercase">
                {{ product.brand }}
            </p>
        </div>

        <!-- Price Row -->
        <div class="flex flex-col gap-1">
            <div class="flex items-baseline gap-1.5 flex-wrap">
                <span class="text-base font-bold text-red-500">
                    {{ i18n.formatPrice(product.price) }}
                </span>
                <span class="text-xs text-gray-400 line-through">
                    {{ i18n.formatPrice(product.originalPrice) }}
                </span>
            </div>
            <span class="text-xs font-semibold text-green-600 bg-green-50 px-2 py-0.5 rounded-full w-fit">
                {{ i18n.formatSaving(product.originalPrice - product.price) }}
            </span>
        </div>

        <!-- Stars Rating -->
        <div class="flex items-center gap-1.5">
            <div class="flex gap-0.5">
                <span *ngFor="let star of getStars()"
                    [class]="'text-base leading-none ' + (star === 1 ? 'text-amber-400' : 'text-gray-200')">
                    â˜…
                </span>
            </div>
            <span class="text-xs text-gray-400 ml-1">({{ product.reviewCount }})</span>
        </div>

        <!-- Add to Cart Button -->
        <button (click)="onAddToCart()" class="mt-auto w-full py-2.5 rounded-xl text-xs font-bold uppercase tracking-widest
             bg-gray-900 text-white border border-transparent
             hover:bg-transparent hover:border-gray-900 hover:text-gray-900
             active:scale-95 transition-all duration-300 cursor-pointer">
            {{ i18n.t('add_to_cart') }}
        </button>
    </div>
</div>