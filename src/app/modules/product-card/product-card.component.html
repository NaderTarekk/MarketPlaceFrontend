<!-- product-card.component.html -->

<div class="group relative bg-white rounded-xl shadow-sm border border-gray-100 
            hover:shadow-lg hover:-translate-y-1 transition-all duration-300 
            overflow-hidden flex flex-col">

    <!-- Discount Badge -->
    <span *ngIf="product.discount" class="absolute top-2 left-2 z-10 
               bg-gradient-to-r from-pink-500 to-purple-500 text-white text-[10px] font-bold 
               px-2 py-0.5 rounded-full shadow-sm animate-pulse">
        -{{ product.discount }}%
    </span>

    <!-- Wishlist Button -->
    <button (click)="onWishlist()" aria-label="Add to Wishlist"
        [class]="'absolute top-2 right-2 z-10 w-7 h-7 flex items-center justify-center rounded-full shadow-sm transition-all duration-300 cursor-pointer ' +
             (product.isWishlisted
               ? 'bg-pink-500 text-white scale-110'
               : 'bg-white/80 backdrop-blur-sm text-gray-400 opacity-0 group-hover:opacity-100 hover:bg-pink-500 hover:text-white')">
        <svg viewBox="0 0 24 24" width="14" height="14" [attr.fill]="product.isWishlisted ? 'currentColor' : 'none'"
            stroke="currentColor" stroke-width="2">
            <path
                d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
            </path>
        </svg>
    </button>

    <!-- Product Image -->
    <div class="relative w-full bg-gradient-to-br from-gray-50 to-purple-50/30 flex items-center justify-center overflow-hidden
                ">
        <img [src]="product.image" [alt]="product.name" class="max-w-[100%] max-h-[90%] object-contain 
                    group-hover:scale-110 transition-transform cursor-pointer duration-500 ease-out rounded-xl" />
    </div>

    <!-- Product Info -->
    <div class="flex flex-col flex-1 gap-1.5 px-3 pb-3 pt-1 cursor-pointer">

        <!-- Name & Brand -->
        <div>
            <h3 class="text-xs sm:text-sm font-semibold text-gray-800 truncate leading-tight">
                {{ i18n.t(product.nameKey) }}
            </h3>
            <p class="text-[10px] text-gray-400 font-medium tracking-wide uppercase">
                {{ product.brand }}
            </p>
        </div>

        <!-- Price Row -->
        <div class="flex items-center justify-between gap-1">
            <div class="flex items-baseline gap-1 flex-wrap">
                <span
                    class="text-sm sm:text-base font-bold bg-gradient-to-r from-pink-500 to-purple-500 bg-clip-text text-transparent">
                    {{ i18n.formatPrice(product.price) }}
                </span>
                <span class="text-[10px] text-gray-400 line-through">
                    {{ i18n.formatPrice(product.originalPrice) }}
                </span>
            </div>
        </div>

        <!-- Stars Rating -->
        <div class="flex items-center gap-1">
            <div class="flex gap-px">
                <span *ngFor="let star of getStars()"
                    [class]="'text-xs leading-none ' + (star === 1 ? 'text-amber-400' : 'text-gray-200')">
                    â˜…
                </span>
            </div>
            <span class="text-[10px] text-gray-400">(reviews {{ product.reviewCount }}) </span>
        </div>

        <!-- Add to Cart Button -->
        <div class="flex items-center justify-center">

            <button (click)="onAddToCart()" class="mt-auto
             w-10 h-10
         rounded-full
         flex items-center justify-center
         bg-gradient-to-r from-pink-500 to-purple-500
         text-white
         hover:from-pink-600 hover:to-purple-600
         hover:shadow-lg hover:shadow-purple-500/30
         active:scale-95
         transition-all duration-300
         cursor-pointer
         group/btn">
                <i class="fa-solid fa-basket-shopping text-sm group-hover/btn:animate-bounce"></i>
            </button>
        </div>

    </div>
</div>